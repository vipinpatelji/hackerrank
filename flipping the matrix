#include <stdio.h>
#define MAX 256

int max(int a, int b) { return a > b ? a : b; }

int main() {
    int q, n, matrix[MAX][MAX];
    scanf("%d", &q);
    while(q--) {
        scanf("%d", &n);
        int size = 2 * n;
        for(int i = 0; i < size; i++)
            for(int j = 0; j < size; j++)
                scanf("%d", &matrix[i][j]);

        int sum = 0;
        for(int i = 0; i < n; i++)
            for(int j = 0; j < n; j++) {
                int v1 = matrix[i][j];
                int v2 = matrix[i][size - 1 - j];
                int v3 = matrix[size - 1 - i][j];
                int v4 = matrix[size - 1 - i][size - 1 - j];
                sum += max(max(v1, v2), max(v3, v4));
            }
        printf("%d\n", sum);
    }
    return 0;
}
